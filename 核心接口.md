# 核心接口

## 分类树管理（node）
编号|名称|url|http method|说明
---|---|---|---|---
1|增加子节点|/node?tree_id=分类树id|post
2|获取子节点|/node?tree_id=分类树id&id=node_id|get|获取本节点详情，及下属节点
3|删除子节点|/node?tree_id=分类树id&id=node_id|delete
4|修改子节点|/node?tree_id=分类树id&id=node_id|put
5|增加子节点提交审批|/node/approve?tree_id=分类树id&id=node_id|post
6|修改子节点提交审批|/node/approve?tree_id=分类树id&id=node_id|put
7|删除子节点提交审批|/node/approve?tree_id=分类树id&id=node_id|delete

## 元数据管理（meta）
编号|名称|url|http method|说明
---|---|---|---|---
1|列举Form|/meta/form/list|get|需要按照parent分组
2|获取Form|/meta/form?id=form_id|get
3|创建Form|/meta/form|post|需要操作变量管理
4|修改Form|/meta/form?id=form_id|put|需要操作变量管理
5|删除Form|/meta/form?id=form_id|delete|需要操作变量管理（删除）
|
6|列举分类树|/meta/tree/list|get
7|获取分类树|/meta/tree?id=分类树id|get
8|创建分类树|/meta/tree|post
9|删除分类树|/meta/tree?id=分类树id|delete
10|修改分类树|/meta/tree?id=分类树id|put
11|自定义列|
12|绑定单据模版url|
13|绑定详情模版url|

## 变量管理（variable）
编号|名称|url|http method|说明
---|---|---|---|---
1|创建自增类型|/variable/increment|post|参数（form_id, name, step, start,  start_with, lenght）
2|获取自增类型|/variable/increment?id=form_id&name=xxx|get
3|获取当前值|/variable/current|get|参数grant_id

## 工作流管理（workflow）
编号|名称|url|http method|说明
---|---|---|---|---
1|列举工作流|/workflow/list|get
2|创建工作流|/workflow|post|名称、process_key, (建表考虑版本号，内部序列号)
3|工作流部署|/workflow/deploy|post|(部署时需要校验版本号)
4|工作流编辑|根据实际情况讨论
5|工作流删除|/workflow|delete|只有未发布的工作流能删除（发布的版本号为空的时候）
|
6|获取我的任务|/workflow/task/list|get|根据当前职位id
7|受理任务|/workflow/task/assignee|post|设置成当前grant_id
8|拒绝任务|/workflow/task/refuse|post
9|驳回任务|/workflow/task/reject|post
10|同意任务|/workflow/task/confirm|post
11|历史任务查询|/workflow/task/history|get|查询历史任务
|
12|发起流程|/workflow/process/start|post
13|我发起的流程|/workflow/process/list|get
14|撤回我发起的流程|/workflow/process/recall|post
15|编辑撤回和驳回流程|/workflow/process|put
16|重新提交|/workflow/process/restart|post
17|获取流程详情|/workflow/process/data|get
18|获取流程（数据）详情|/workflow/process|get

## 规则管理（rule）
编号|名称|url|http method|说明
---|---|---|---|---
1|规则添加|/rule?form_id=form_id|post|
2|规则编辑|/rule?id=rule_id|put|
3|规则查询|/rule?id=xxx|get
4|规则列表|/rule/list|get
5|规则删除|/rule|delete
6|规则监听|||消息队列获取全部规则，并根据条件过滤
7|定时任务重置|/rule/time?form_id|post
8|查询规则事件字段|/rule/field?form_id


## 单据管理（form）
编号|名称|url|http method|说明
---|---|---|---|---
1|单据添加|
2|单据保存|
3|查询单据详情|
4|单据列表|||form_id
5|模糊查询|
6|高级查询|
7|提交审批|
8|单据删除|||只有草稿状态删除
9|拆分合并|||

---

1. 数据列表（加上node_id）（考虑自定义表头）
2. 数据详情
3. 预先填充数据
4. 提交保存（新增）
5. 提交新增审批
6. 提交修改（考虑草稿状态的修改）
7. 提交修改审批
8. 删除（考虑提交审批）
9. 复制（考虑不能复制的数据情况）
10. 导入（模版模块）
11. 导出（模版模块）
12. 打印详情（模版模块）
13. 打印列表格式化（是否考虑删除这个接口）
14. 详情合并（后台合并，将合并结果返回给前台，前台隐藏合并前的数据，显示合并后的数据）

## 模版管理（template）
编号|名称|url|http method|说明
---|---|---|---|---
1|生成单据模版|||消息队列传字段信息，返回数据绑定到元数据中
2|生成单据详情模版|||
3|上传单据表格|||解析并新建数据（单据管理）
4|上传详情表格|||解析replace
